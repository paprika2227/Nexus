<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Growth Analytics - Nexus</title>
    <link rel="icon" type="image/webp" href="https://cdn.discordapp.com/avatars/1444739230679957646/32f2d77d44c2f3989fecd858be53f396.webp?size=256">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="pages.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
        <nav class="navbar">
      <div class="container">
        <a href="index.html" class="nav-brand">NEXUS</a>
        
        <div class="nav-right">
          <!-- Dropdown Menu -->
          <div class="dropdown">
            <button class="dropdown-toggle">
              Menu ‚ñº
            </button>
            <div class="dropdown-menu">
              <a href="features.html">Features</a>
              <a href="commands.html">Commands</a>
              <a href="comparison.html">vs Wick</a>
              <a href="live-comparison.html">Live Comparison</a>
              <a href="setup.html">Setup</a>
              <a href="tutorial.html">Tutorial</a>
              <a href="docs.html">Docs</a>
              <a href="api.html">API Documentation</a>
              <a href="faq.html">FAQ</a>
              <a href="stats.html">Stats</a>
              <a href="status.html">Status</a>
              <a href="showcase.html">Showcase</a>
              <a href="testimonials.html">Success Stories</a>
              <a href="vote-features.html">Vote on Features</a>
              <a href="growth.html">Growth</a>
              <a href="changelog.html">Changelog</a>
            </div>
          </div>

          <a
            href="https://regular-puma-clearly.ngrok-free.app"
            target="_blank"
            class="btn-dashboard"
            >Dashboard</a
          >
          <a href="setup-wizard.html" class="btn-nav">Get Started</a>
        </div>
      </div>
    </nav>

    <div class="container" style="margin-top: 100px;">
        <header class="page-header">
            <h1>üìà Growth Analytics</h1>
            <p>Watch Nexus grow in real-time</p>
        </header>

        <div class="content-section">
            <!-- Live Stats -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; text-align: center;">
                    <div style="font-size: 3rem; font-weight: 900; color: #00d1b2;" id="current-servers">17</div>
                    <div style="opacity: 0.8;">Current Servers</div>
                </div>
                <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; text-align: center;">
                    <div style="font-size: 3rem; font-weight: 900; color: #667eea;" id="total-users">356</div>
                    <div style="opacity: 0.8;">Protected Users</div>
                </div>
                <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; text-align: center;">
                    <div style="font-size: 3rem; font-weight: 900; color: #ffd700;" id="growth-rate">+2</div>
                    <div style="opacity: 0.8;">Growth Today</div>
                </div>
            </div>

            <!-- Growth Chart -->
            <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; margin-bottom: 40px;">
                <h2 style="margin-bottom: 20px;">üìä Server Growth (Last 30 Days)</h2>
                <div style="position: relative; height: 400px;">
                    <canvas id="growthChart"></canvas>
                </div>
            </div>

            <!-- Source Breakdown -->
            <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; margin-bottom: 40px;">
                <h2 style="margin-bottom: 20px;">üéØ Joins by Source</h2>
                <div style="position: relative; height: 300px;">
                    <canvas id="sourceChart"></canvas>
                </div>
            </div>

            <!-- Milestones -->
            <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px;">
                <h2 style="margin-bottom: 20px;">üèÜ Milestones</h2>
                <div style="display: grid; gap: 15px;">
                    <div class="milestone unlocked">
                        <span class="milestone-icon">‚úÖ</span>
                        <span class="milestone-text">5 Servers</span>
                    </div>
                    <div class="milestone unlocked">
                        <span class="milestone-icon">‚úÖ</span>
                        <span class="milestone-text">10 Servers</span>
                    </div>
                    <div class="milestone progress" id="milestone-20">
                        <span class="milestone-icon">üîÑ</span>
                        <span class="milestone-text">20 Servers</span>
                        <div class="milestone-progress-bar">
                            <div class="milestone-progress-fill" id="progress-20" style="width: 85%;"></div>
                        </div>
                        <span class="milestone-count" id="count-20">17/20</span>
                    </div>
                    <div class="milestone locked">
                        <span class="milestone-icon">üîí</span>
                        <span class="milestone-text">50 Servers</span>
                    </div>
                    <div class="milestone locked">
                        <span class="milestone-icon">üîí</span>
                        <span class="milestone-text">100 Servers</span>
                    </div>
                    <div class="milestone locked">
                        <span class="milestone-icon">üîí</span>
                        <span class="milestone-text">250 Servers</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div style="text-align: center;">
                <h3>NEXUS</h3>
                <p>Elite Discord Protection</p>
                <p style="margin-top: 15px; opacity: 0.7;">&copy; 2025 Nexus. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <style>
        .milestone {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            position: relative;
        }

        .milestone.unlocked {
            border-left: 4px solid #10b981;
        }

        .milestone.progress {
            border-left: 4px solid #f59e0b;
        }

        .milestone.locked {
            opacity: 0.5;
            border-left: 4px solid #666;
        }

        .milestone-icon {
            font-size: 2rem;
        }

        .milestone-text {
            flex: 1;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .milestone-progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(0, 0, 0, 0.3);
        }

        .milestone-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #ffd700);
            transition: width 1s ease;
        }

        .milestone-count {
            font-size: 0.9rem;
            opacity: 0.8;
        }
    </style>

    <script>
        const API_URL = "https://regular-puma-clearly.ngrok-free.app/api/stats";
        const INVITE_STATS_API = "https://regular-puma-clearly.ngrok-free.app/api/admin/invite-stats";

        let growthData = [];
        let currentServers = 17;

        async function loadData() {
            try {
                // Get current stats
                const response = await fetch(API_URL, {
                    headers: { "ngrok-skip-browser-warning": "true" }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    currentServers = data.servers || 0;
                    
                    document.getElementById('current-servers').textContent = currentServers;
                    document.getElementById('total-users').textContent = data.users || 0;
                    
                    // Update milestone progress
                    const progress = (currentServers / 20) * 100;
                    document.getElementById('progress-20').style.width = Math.min(progress, 100) + '%';
                    document.getElementById('count-20').textContent = `${currentServers}/20`;
                    
                    if (currentServers >= 20) {
                        document.getElementById('milestone-20').className = 'milestone unlocked';
                        document.getElementById('milestone-20').querySelector('.milestone-icon').textContent = '‚úÖ';
                    }
                    
                    // Simulate growth data (in real system, this would come from database)
                    createGrowthChart();
                }
            } catch (error) {
                console.error("Failed to load growth data:", error);
            }

            // Load source breakdown
            try {
                const response = await fetch(INVITE_STATS_API, {
                    headers: { "ngrok-skip-browser-warning": "true" }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    createSourceChart(data.stats || []);
                }
            } catch (error) {
                console.error("Failed to load source stats:", error);
            }
        }

        function createGrowthChart() {
            // Simulated 30-day growth (replace with real data from database)
            const labels = [];
            const data = [];
            let currentCount = 15; // Starting point 30 days ago

            for (let i = 30; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                labels.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                
                // Simulate growth (replace with real data)
                if (i === 0) {
                    data.push(currentServers);
                } else {
                    currentCount += Math.random() > 0.7 ? 1 : 0;
                    data.push(currentCount);
                }
            }

            const ctx = document.getElementById('growthChart');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels,
                    datasets: [{
                        label: 'Total Servers',
                        data,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#fff', font: { size: 14 } }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#fff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#fff', maxRotation: 45, minRotation: 45 },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    }
                }
            });
        }

        function createSourceChart(sources) {
            if (sources.length === 0) {
                document.getElementById('sourceChart').parentElement.innerHTML = '<p style="text-align: center; opacity: 0.7; padding: 40px;">No source data yet</p>';
                return;
            }

            const ctx = document.getElementById('sourceChart');
            const labels = sources.map(s => s.source);
            const data = sources.map(s => s.total_joins);
            const colors = [
                '#667eea',
                '#00d1b2',
                '#f59e0b',
                '#ef4444',
                '#9b59b6',
                '#3498db'
            ];

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels,
                    datasets: [{
                        data,
                        backgroundColor: colors.slice(0, sources.length),
                        borderWidth: 2,
                        borderColor: '#1a1a1a'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: '#fff', padding: 15, font: { size: 14 } }
                        }
                    }
                }
            });
        }

        // Load data
        loadData();

        // Refresh every 30 seconds
        setInterval(loadData, 30000);
    </script>
</body>
</html>

